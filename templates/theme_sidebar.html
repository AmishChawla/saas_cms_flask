<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Customize Appearance</title>

  <!-- Google Font: Source Sans Pro -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
  <!-- Icons -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/plugins/fontawesome-free/css/all.min.css') }}">
  <link href="{{ url_for('static', filename='assets/vendor/bootstrap-icons/bootstrap-icons.css') }}" rel="stylesheet">
  <link href="{{ url_for('static', filename='assets/vendor/boxicons/css/boxicons.min.css') }}" rel="stylesheet">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{ url_for('static', filename='assets/dist/css/adminlte.min.css') }}">
  <link href="https://cdn.datatables.net/2.0.3/css/dataTables.dataTables.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
  <style>
    /* Sidebar Styles */
    .sidebar {
      position: fixed;
      top: 0;
      left: 0;
      width: 250px;
      height: 100vh;
      background-color: #0a0f0f;
      color: #d0d0d0;
      padding: 20px;
      overflow: hidden;
      z-index: 1000;
    }

    .sidebar .site-title {
      display: flex;
      align-items: center;
      font-size: 1em;
      margin-bottom: 20px;
    }

    .sidebar .site-title .search-icon {
      margin-left: auto;
      font-size: 1em;
      cursor: pointer;
    }

    .sidebar .site-title + .design-link {
      margin-top: 80px; /* Add space between the site-title div and design-link */
    }

    .sidebar .design-link {
      display: block;
      margin: 20px 0;
      text-decoration: none;
      color: #d0d0d0;
      font-weight: bold;
    }

    .sidebar .design-link span {
     font-size: 1.2em;
    }

    .sidebar .design-link:hover {
      text-decoration: none;
    }

    .sidebar .description {
      margin-bottom: 30px;
      font-size: 13px;
      color: #ccc;
      line-height: 1.5;
    }

    .sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    .sidebar ul li a {
       height : 40px;
      display: flex;
      align-items: center;
      text-decoration: none;
      color: #949494;
      font-size: 1em;
      position: relative;
      padding-left: 10px;
    }

    .sidebar ul li a i {
      margin-right: 10px;
      width: 24px;
      text-align: center;
    }

    .sidebar ul li a span {
      flex: 1 1 0%;
      margin-left: 5px;
      font-size: 13px;
    }



    .content {
      margin-left: 270px;
      padding: 20px;
    }

    .sidebar ul li a:hover {
       background-color: #3c434a; /* Primary color on hover */
      color: white;
      border: none;
      border-radius: 2px;
    }

    /* Modal Styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1050;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background-color: rgba(0, 0, 0, 0.5);
    }

    .modal-content {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 400px;
      background-color: #f8f9fa; /* Off-white background */
      padding: 20px;
      border-radius: 5px;
      box-shadow: 0 3px 9px rgba(0, 0, 0, 0.5);
    }

    .modal-content .search-field {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
    }

    .modal-content .search-field input {
      flex-grow: 1;
      padding: 10px;
      font-size: 14px;
      border: none;
      border-radius: 5px;
    }

    .modal-content .search-field i {
      margin-left: 10px;
      font-size: 1em;
      cursor: pointer;
    }

    .modal-content .nav-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }



    .modal-content .nav-list li a {

       height : 40px;
      display: flex;
      align-items: center;
      text-decoration: none;
      color: #111;
      font-size: 1em;
      position: relative;
      padding-left: 10px;
    }

    .modal-content .nav-list li a span {
      flex: 1 1 0%;
      margin-left: 5px;
      font-size: 13px;
    }

    .modal-content .nav-list li a i {
      margin-right: 10px;
      width: 24px;
      text-align: center;
    }

    .modal-content .nav-list li a:hover {
      background-color: #007bff; /* Primary color on hover */
      color: white;
      border: none;
      border-radius: 2px;
    }

    .modal-content .nav-list li a .bi-chevron-right {
      display: none; /* Hide chevron-right icon in modal */
    }




    .selected-item {
    background-color: var(--bs-primary); /* Bootstrap's primary color */
    color: white;
}


    .color-container {
  display: grid;
  grid-template-columns: repeat(2, 110px);
  grid-template-rows: repeat(2, 60px);
  gap: 10px;
}

.rectangle {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  width: 100px;
  height: 60px;
  color: white;
  font-size: 20px;
  font-family: Arial, sans-serif;
  overflow: hidden;
  border-radius: 4px;
}

.text {
  position: absolute;
  z-index: 1;
  display: flex;
  align-items: center;
}

.text i {
  margin: 0 2px; /* Adjust the spacing between dots */
}

.color-name {
  position: absolute;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.rectangle:hover .color-name {
  opacity: 1;
}

.rectangle:hover .text {
  opacity: 0;
}




  </style>
</head>
<body class="hold-transition sidebar-mini">
  <div class="wrapper">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="site-title">
        <span>Site Title</span>
        <i class="search-icon fas fa-search" id="openSearchModal"></i>
      </div>
      <a href="#" class="design-link" id="backLink"><i class="bi bi-chevron-left" style="margin-right: 20px;"></i> <span>Design</span></a>
      <p class="description" id="description">Customize the appearance of your website using the block editor.</p>
      <nav>
        <ul class="nav flex-column" id="navItems">
          <li class="nav-item">
            <a href="#" class="nav-link" id="navigationLink">
              <i class="bi bi-compass"></i>
              <span>Navigation</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" id="styleLink">
              <i class="fas fa-adjust"></i>
              <span>Styles</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
              <a href="#" class="nav-link" id="pagesLink">
                  <i class="fas fa-file-alt"></i>
                  <span>Pages</span>
                  <i class="bi bi-chevron-right" style="font-size: 13px"></i>
              </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="fas fa-columns"></i>
              <span>Templates</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="fas fa-th-large"></i>
              <span>Patterns</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
        </ul>
      </nav>
    </aside>
    <!-- Content Wrapper -->
    <div class="content" id="block-content">
      <!-- Your content goes here -->
      {% block content %}

      {% endblock %}
    </div>
  </div>

  <!-- Search Modal -->
  <!-- Modal Structure -->
<div class="modal" id="searchModal">
    <div class="modal-content">
      <div class="search-field">
        <input type="text" id="searchInput" placeholder="Search...">
        <i class="fas fa-search"></i>
      </div>
      <ul class="nav-list" id="navList">
        <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="bi bi-compass"></i>
              <span>Navigation</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="fas fa-adjust"></i>
              <span>Styles</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link" id="modalPagesLink">
              <i class="fas fa-file-alt"></i>
              <span>Pages</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="fas fa-columns"></i>
              <span>Templates</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
          <li class="nav-item">
            <a href="#" class="nav-link">
              <i class="fas fa-th-large"></i>
              <span>Patterns</span>
              <i class="bi bi-chevron-right" style="font-size: 13px"></i>
            </a>
          </li>
      </ul>
    </div>
</div>

  <!-- Scripts -->
 <script>
   document.addEventListener("DOMContentLoaded", function () {

    const pagesLink = document.getElementById("pagesLink");
    const navigationLink = document.getElementById("navigationLink");
    const styleLink = document.getElementById("styleLink");
    const backLink = document.getElementById("backLink");
    const navItems = document.getElementById("navItems");
    const description = document.getElementById("description");
    const originalContent = document.getElementById("block-content").innerHTML;

    // Store the original navItems content
    const originalNavItems = navItems.innerHTML;

    // Function to update sidebar content
    function updateSidebar(title, items) {
        backLink.style.display = 'block'; // Show the back link
        backLink.innerHTML = `<i class="bi bi-chevron-left" style="margin-right: 20px;"></i> <span>${title}</span>`;
        navItems.innerHTML = ""; // Clear existing items

        items.forEach(item => {
            const li = document.createElement("li");
            li.classList.add("nav-item");
            li.innerHTML = `
                <a href="#" class="nav-link">
                    <i class="${item.icon}"></i>
                    <span>${item.text}</span>
                </a>`;
            navItems.appendChild(li);
        });
    }


    // Function to handle Pages link click
    function handlePagesClick(event) {
        event.preventDefault();
        if (description) {
            description.style.display = 'none'; // Hide the paragraph
        }
        updateSidebar("Pages", [
            { icon: "fas fa-file-alt", text: "All Pages" },
            { icon: "bi bi-check-circle", text: "Published" },
            { icon: "bi bi-clock", text: "Schedule" },
            { icon: "bi bi-highlights", text: "Drafts" },
            { icon: "bi bi-p-circle", text: "Pending" },
            { icon: "bi bi-ban", text: "Private" },
            { icon: "bi bi-trash", text: "Trash" },
        ]);
        document.getElementById("block-content").innerHTML = `
<div class="row">
    <div class="col-lg-12 grid-margin stretch-card" style="padding-right: 0; padding-left: 0;">
      <div class="card">
        <div class="card-body" style="overflow-x: auto;">
          <div style="display:flex; justify-content:space-between;">
            <h2 class="m-0">Pages</h2>
            <div style="display: flex; justify-content: space-between;">
              <a class="btn btn-info" href="{{ url_for('add_page')}}" style="padding: 6px 30px 6px 30px;">
                <span class="menu-title">Add New Page</span>
              </a>
            </div>
          </div>

            <div class="tab-content" style="margin-top: 1.5rem;">
                <div class="tab-pane fade show active" id="published-pages">
          <table id="userpagesTable" class="hover" style="width:100%;">
            <thead>
              <tr>
                <th>Title</th>
                <th>Author</th>

                <th>Status</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% for data in pages %}

              <tr style="max-height: 100px; overflow-y: auto;">
                <td class="py-1"><a href="{{ url_for('get_page_by_id', page_id=data.id) }}"> {{ data.title }}</a></td>
                <td class="py-1 text-truncate">{{ data.author_name }}</td>

                <td class="py-1">{{ data.status }}</td>
                <td style="display: flex">
                  {% if data.display_in_nav == 'no' %}
                    <a href="{{ url_for('page_show_in_nav', page_id=data.id, theme_name=theme_name, theme_id=theme_id) }}" title="Show in Navbar"><i class="bi bi-toggle-off" style="color:#6b1313; font-size: 1.5rem"></i></a>
                  {% else %}
                    <a href="{{ url_for('page_show_in_nav', page_id=data.id, theme_name=theme_name, theme_id=theme_id) }}" title="Show in Navbar"><i class="bi bi-toggle-on" style="color:#6b1313; font-size: 1.5rem"></i></a>
                  {% endif %}

                  <a  href="{{ url_for('update_page', page_id=data.id) }}" style="margin-right: 1rem;" data-toggle="tooltip" data-placement="top" title="Modify"><i class="bi bi-pen" style="color:#0b4647; font-size: 1.5rem"></i></a>
                  <a  data-bs-toggle="modal" data-bs-target="#deleteModal_{{ data.id }}" data-toggle="tooltip" data-placement="top" title="Delete"><i class="bi bi-trash3-fill " style="color:#6b1313; font-size: 1.5rem"></i></a>

                  <!-- Modal for delete button -->
                  <div class="modal fade" id="deleteModal_{{ data.id }}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="deleteModalLabel_{{ data.id }}" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h4 class="modal-title fs-5" id="deleteModalLabel_{{ data.id }}">Delete page</h4>
                          <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">&times;</button>

                        </div>
                        <div class="modal-body">
                          Are you sure you want to delete this page?
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                          <a type="button" class="btn btn-danger" href="{{ url_for('user_delete_page', page_id=data.id) }}">Delete</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>

              {% endfor %}
            </tbody>
          </table>
        </div>

                </div>
        </div>
      </div>
    </div>
  </div>

      `;

    }

    // Function to handle Navigation link click
    function handleNavigationClick(event) {
        event.preventDefault();
        backLink.innerHTML = `<i class="bi bi-chevron-left" style="margin-right: 20px;"></i> <span>Navigation</span>`;
        if (description) {
            description.style.display = 'block';
            description.innerHTML = `<p class="description" id="description">Customize the appearance of your website using the block editor. Navigation Menus are a curated collection of blocks that allow visitors to get around your site.</p>`;
        }

        let itemsHTML = `
            {% if pages %}
                {% for page in pages %}
                {% if page.status == 'published' %}
                <li class="nav-item">
                    <a href="{{ url_for('get_page_by_id', page_id=page.id) }}" class="nav-link">

                    <i class="bi bi-file-text"></i>
                        <span>{{ page.title }}</span>
                    </a>
                </li>
                {% endif %}
                {% endfor %}
            {% endif %}
        `;

        navItems.innerHTML = itemsHTML;
        // Attach event listeners to open the modal
        const navLinks = navItems.querySelectorAll('.nav-link');
        navLinks.forEach(function (link) {
            link.addEventListener('click', function () {
                const pageId = this.getAttribute('data-page-id');
                const modal = document.getElementById(`navigationModal_${pageId}`);
                modal.style.display = 'block';
            });
        });

        // Attach event listeners to close the modal
        const closeButtons = navItems.querySelectorAll('.close');
        closeButtons.forEach(function (button) {
            button.addEventListener('click', function () {
                const pageId = this.getAttribute('data-page-id');
                const modal = document.getElementById(`navigationModal_${pageId}`);
                modal.style.display = 'none';
            });
        });
        document.getElementById("block-content").innerHTML = originalContent;
    }

    // Function to handle Style link click
      function handleStyleClick(event) {
          event.preventDefault();
          backLink.innerHTML = `<i class="bi bi-chevron-left" style="margin-right: 20px;"></i> <span>Styles</span>`;
          if (description) {
              description.style.display = 'block';
              description.innerHTML = `<p class="description" id="description">Choose a different style combination for the theme styles.</p>`;
          }

          let itemsHTML = `
          <div class="color-container">
            <div class="rectangle" style="background-color: #ff6666;">
              <div class="text">Aa</div>
              <div class="color-name">Pink</div>
            </div>
            <div class="rectangle" style="background-color:  #c2c2a3;">
              <div class="text">Aa</div>
              <div class="color-name">Gray</div>
            </div>
            <div class="rectangle" style="background-color: #3357FF;">
              <div class="text">Aa</div>
              <div class="color-name">Blue</div>
            </div>
            <div class="rectangle" style="background-color: #4c4c34;">
              <div class="text">Aa</div>
              <div class="color-name">Dark</div>
            </div>
          </div>

          `;

          navItems.innerHTML = itemsHTML;
          document.getElementById("block-content").innerHTML = originalContent;
      }


    pagesLink.addEventListener("click", handlePagesClick);
    navigationLink.addEventListener("click", handleNavigationClick);
    styleLink.addEventListener("click", handleStyleClick);

    // Handle back link click to return to the main menu
    backLink.addEventListener("click", function (event) {
        event.preventDefault();
        backLink.style.display = 'block';
        backLink.innerHTML = `<i class="bi bi-chevron-left" style="margin-right: 20px;"></i> <span>Design</span>`;
        if (description) {
            description.style.display = 'block';
            description.innerHTML = `<p class="description" id="description">Customize the appearance of your website using the block editor.</p>`;
        }
        navItems.innerHTML = originalNavItems; // Restore the original nav items content

        // Reattach the event listeners after restoring the original content
        document.getElementById("pagesLink").addEventListener("click", handlePagesClick);
        document.getElementById("navigationLink").addEventListener("click", handleNavigationClick);
        document.getElementById("styleLink").addEventListener("click", handleStyleClick);
        document.getElementById("block-content").innerHTML = originalContent;
    });
});


</script>



  <script>
    // Get the modal
    var modal = document.getElementById("searchModal");

    // Get the button that opens the modal
    var btn = document.getElementById("openSearchModal");

    // Get the input field for search
    var searchInput = document.getElementById("searchInput");

    // Get the list of nav items
    var navList = document.getElementById("navList");
    var navLinks = document.querySelectorAll(".nav-item");

    // Open the modal when the button is clicked
    btn.onclick = function() {
      modal.style.display = "block";

    }

    // Close the modal when clicking outside of the modal content
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

    // Filter the list items based on search input
    searchInput.addEventListener("input", function() {
      let filter = searchInput.value.toLowerCase();
      let items = navList.getElementsByTagName("li");
      Array.from(items).forEach(function(item) {
        let text = item.textContent || item.innerText;
        item.style.display = text.toLowerCase().includes(filter) ? "" : "none";
      });
    });
  </script>




  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  <!-- AdminLTE App -->
  <script src="{{ url_for('static', filename='assets/dist/js/adminlte.min.js') }}"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
<script src="https://cdn.datatables.net/2.0.3/js/dataTables.js"></script>
<script>
new DataTable('#userpagesTable');
</script>
</body>
</html>
